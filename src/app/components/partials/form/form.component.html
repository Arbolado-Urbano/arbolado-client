<form [formGroup]="form" [ngClass]="{ 'was-validated': validated }" novalidate>
  <input type="hidden" name="user_latlng">
  <input type="hidden" name="radio" value="1000">
  <div class="row">
    <div class="col-12">
      <div class="form-group">
        <h2>
          ¿Dónde?
        </h2>
        <div class="custom-control custom-radio custom-control-inline">
          <input type="radio" id="marker-all" formControlName="marker" class="custom-control-input" value="0">
          <label class="custom-control-label" for="marker-all">
            En todo el mapa
          </label>
        </div>
        <div class="custom-control custom-radio custom-control-inline" tooltip="Hacé click en el mapa para colocar una marca.">
          <input type="radio" id="marker-point" formControlName="marker" class="custom-control-input" value="1" disabled>
          <label class="custom-control-label" for="marker-point">
            Marcar en el mapa
          </label>
        </div>
      </div>
    </div>

    <div class="col-12">
      <div class="form-group">
        <h2>
          ¿Qué especie?
        </h2>
        <app-species-select [elements]="species" formControlName="species">
        </app-species-select>
      </div>
    </div>

    <div class="col-12" id="filters" [collapse]="isCollapsed" [isAnimated]="true">
      <div class="form-group">
        <h2>
          Sabores
        </h2>
        <div class="custom-control custom-switch">
          <input type="checkbox" class="custom-control-input" id="input-flavors" formControlName="flavors">
          <label class="custom-control-label" for="input-flavors">
            Frutales y medicinales
          </label>
        </div>
      </div>

      <div class="form-group">
        <h2>
          Origen
        </h2>
        <div class="custom-control custom-radio custom-control-inline">
          <input type="radio" id="rorigen-nativas" formControlName="origin" class="custom-control-input" value="Nativo/Autóctono">
          <label class="custom-control-label" for="rorigen-nativas">
            Nativas
          </label>
        </div>
        <div class="custom-control custom-radio custom-control-inline">
          <input type="radio" id="rorigen-exoticas" formControlName="origin" class="custom-control-input" value="Exótico">
          <label class="custom-control-label" for="rorigen-exoticas">
            Exóticas
          </label>
        </div>
        <button *ngIf="form.controls.origin.value" type="button" class="btn btn-link py-0" (click)="cleanOrigin()">
          <span class="sr-only">
            Borrar selección de origen
          </span>
          <fa-icon [icon]="icons.faTrashAlt">
          </fa-icon>
        </button>
      </div>

      <div class="form-group">
        <div class="regiones" [formGroup]="form.controls.region">
          <h2>
            Región de origen
          </h2>
          <div class="custom-control custom-switch custom-control-inline">
            <input type="checkbox" class="custom-control-input" id="borigen_pampeana" formControlName="pampeana" value="1">
            <label class="custom-control-label" for="borigen_pampeana">
              Pampeana
            </label>
          </div>
          <div class="custom-control custom-switch custom-control-inline">
            <input type="checkbox" class="custom-control-input" id="borigen_nea" formControlName="nea" value="1">
            <label class="custom-control-label" for="borigen_nea">
              NEA
            </label>
          </div>
          <div class="custom-control custom-switch custom-control-inline">
            <input type="checkbox" class="custom-control-input" id="borigen_noa" formControlName="noa" value="1">
            <label class="custom-control-label" for="borigen_noa">
              NOA
            </label>
          </div>
          <div class="custom-control custom-switch custom-control-inline">
            <input type="checkbox" class="custom-control-input" id="borigen_cuyana" formControlName="cuyana" value="1">
            <label class="custom-control-label" for="borigen_cuyana">
              Cuyana
            </label>
          </div>
          <div class="custom-control custom-switch custom-control-inline">
            <input type="checkbox" class="custom-control-input" id="borigen_patagonica" formControlName="patagonica" value="1">
            <label class="custom-control-label" for="borigen_patagonica">
              Patagónica
            </label>
          </div>
        </div>
      </div>
    </div>
    <div class="col-12">
      <button type="button" class="btn btn-secondary" (click)="isCollapsed = !isCollapsed" [attr.aria-expanded]="!isCollapsed" aria-controls="filters">
        <span *ngIf="!isCollapsed">Ocultar</span>
        <span *ngIf="isCollapsed">Mostrar</span>
        filtros
      </button>
    </div>
  </div>
  <button type="button" class="btn btn-primary btn-lg btn-block mt-4" (click)="search()" [popover]="popoverTemplate" [popoverTitle]="popoverTitle" triggers="" [isOpen]="popoverOpen" [outsideClick]="true">
    Buscar
  </button>
  <ng-template #popoverTemplate>
    <p>
      Para buscar, empezá marcando un punto en el mapa.
    </p>
    <p class="font-italic">
      Consejo piola: Podés buscar en toda la ciudad si seleccionás alguna especie.
    </p>
  </ng-template>
</form>
